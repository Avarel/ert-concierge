!function(e){function t(t){for(var i,s,r=t[0],l=t[1],d=t[2],h=0,u=[];h<r.length;h++)s=r[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(c&&c(t);u.length;)u.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={2:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=l;a.push([10,1]),n()}([,,function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Views=t.Drawer=t.Sidebar=t.Chat=t.createElement=void 0;const o=i(n(27));t.Chat=o.default;const a=i(n(30));t.Sidebar=a.default;const s=i(n(6));t.Drawer=s.default;const r=i(n(38));t.Views=r.default,t.createElement=function(e,t=[]){let n=document.createElement(e);return n.classList.add(...t),n}},function(e,t){e.exports=BABYLON},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceEventHandler=t.EventHandler=void 0;class i{onReceive(e){var t,n,i,o,a,s,r;switch(e.type){case"MESSAGE":null===(t=this.onRecvMessage)||void 0===t||t.call(this,e);break;case"HELLO":null===(n=this.onRecvHello)||void 0===n||n.call(this,e);break;case"GROUP_SUBSCRIBERS":null===(i=this.onRecvGroupSubs)||void 0===i||i.call(this,e);break;case"GROUPS":null===(o=this.onRecvGroupList)||void 0===o||o.call(this,e);break;case"CLIENTS":null===(a=this.onRecvClientList)||void 0===a||a.call(this,e);break;case"SUBSCRIPTIONS":null===(s=this.onRecvSubscriptions)||void 0===s||s.call(this,e);break;case"STATUS":null===(r=this.onRecvStatus)||void 0===r||r.call(this,e)}}}t.EventHandler=i;t.ServiceEventHandler=class extends i{constructor(e,t){super(),this.client=e,this.group=t,this.subscribed=!1}onClose(e){this.onUnsubscribe()}onRecvHello(e){this.client.sendJSON({type:"FETCH_GROUP_SUBSCRIBERS",group:this.group})}onRecvGroupSubs(e){e.group==this.group&&this.subscribe(this.group)}subscribe(e){this.client.sendJSON({type:"SUBSCRIBE",group:e})}onRecvStatus(e){switch(e.code){case"NO_SUCH_GROUP":e.group==this.group&&console.error("Group `",this.group,"` does not exist on concierge.");break;case"GROUP_DELETED":e.group==this.group&&console.warn("Group `",this.group,"` has been deleted on the concierge.");break;case"GROUP_CREATED":e.group==this.group&&this.subscribe(this.group);break;case"SUBSCRIBED":e.group==this.group&&(console.log("Subscribed to `",this.group,"`."),this.subscribed=!0,this.onSubscribe());break;case"UNSUBSCRIBED":e.group==this.group&&(console.log("Unsubscribed from `",this.group,"`."),this.subscribed=!1,this.onUnsubscribe())}}}},function(e,t){e.exports=React},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Drawer=t.createElement=void 0,n(35);const i=n(37),o=n(2);var a;Object.defineProperty(t,"createElement",{enumerable:!0,get:function(){return o.createElement}}),function(e){class t extends i.AbstractBody{constructor(e,t,n){super(void 0,n),this.tag=e,this.headerTabElement=t,this.type="TAB"}addHeader(e){return this.addChild(new i.Header(this),e)}addBody(e){return this.addChild(new i.Body(this),e)}show(e=!0){e?(this.headerTabElement.classList.add("active"),this.bodyElement.classList.add("active")):(this.headerTabElement.classList.remove("active"),this.bodyElement.classList.remove("active"))}remove(){this.headerTabElement.remove(),this.bodyElement.remove(),super.remove()}}e.Tab=t;e.UI=class{constructor(e){this.rootElement=e,this.tabs=new Map,this.rootElement=e,this.headerElement=e.querySelector(".window-header")||o.createElement("div",["window-header"]),this.rootElement.prepend(this.headerElement),this.drawerElement=this.headerElement.querySelector(".window-drawer")||o.createElement("div",["window-drawer"]),this.headerElement.prepend(this.drawerElement),this.drawerElement.addEventListener("click",()=>{this.toggle()}),this.bodyElement=e.querySelector(".window-body")||o.createElement("div",["window-body"]),this.rootElement.append(this.bodyElement),this.bodyElement.querySelectorAll(".window-tab").forEach((e,t)=>{let n=e.getAttribute("tag");if(n){let i=e.getAttribute("label")||n;this.addPopulatedTab(n,i,e).show(0==t)}})}addPopulatedTab(e,n,i){if(this.tabs.has(e))throw new Error("Tab "+e+" already exists!");const a=o.createElement("div",["window-header-tab"]);a.innerText=n,this.headerElement.appendChild(a),this.bodyElement.appendChild(i);const s=new t(e,a,i);return this.tabs.set(e,s),a.addEventListener("click",()=>{this.show(!0),this.showTab(e)}),s}addTab(e,t,n){if(this.tabs.has(e))throw new Error("Tab "+e+" already exists!");const i=o.createElement("div",["window-tab"]);let a=this.addPopulatedTab(e,t,i);return null==n||n(a),a}removeTab(e){let t=this.tabs.get(e);if(t){t.remove(),this.tabs.delete(e);let n=this.tabs.keys().next().value;n&&this.showTab(n)}}showTab(e){for(let[t,n]of this.tabs)n.show(t==e)}toggle(){this.rootElement.classList.toggle("hidden")}show(e){e?this.rootElement.classList.remove("hidden"):this.rootElement.classList.add("hidden")}}}(a=t.Drawer||(t.Drawer={})),t.default=a},,,,function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewer=void 0,n(11);const s=a(n(13)),r=n(14),l=n(15),d=n(16),c=n(25),h=n(26),u=n(2);var p;!function(e){new u.Drawer.UI(document.querySelector(".window#chat-window"));let t=new u.Drawer.UI(document.querySelector(".window#control-window"));t.addTab("about","About",e=>{e.addHeader(e=>{e.add("h2","ERT Concierge / BabylonJS Front-end"),e.add("p","SURF 2020 / OVRAS")}),e.addBody(e=>{e.addBox(e=>{e.add("h2","An Tran"),e.add("p","Intern")}),e.addBox(e=>{e.add("h2","Santiago Lombeyda"),e.add("p","Mentor")}),e.addBox(e=>{e.add("h2","Front-end"),e.add("p","Pug/SCSS/TypeScript + Webpack")}),e.addBox(e=>{e.add("h2","Back-end"),e.add("p","Rust")})})}),t.showTab("about"),t.addTab("example","Example",e=>{e.addHeader(e=>{e.addBox(e=>{e.add("p","Some Subtitle")}),e.add("h1","Example Controls"),e.add("p","Some Subtitle"),e.addEntry(e=>{e.name.text="Example Input",e.value.addTextInput(e=>{alert(e)})}),e.addEntry(e=>{e.name.text="Multi-input",e.value.addTextInput(e=>{alert(e)}),e.value.addTextInput(e=>{alert(e)}),e.value.addTextInput(e=>{alert(e)})})}),e.addBody(e=>{e.addBox(e=>{e.addEntry(e=>{e.name.text="Example Input",e.value.addTextInput(e=>{alert(e)})}),e.addEntry(e=>{e.name.text="Multi-input",e.value.addTextInput(e=>{alert(e)}),e.value.addTextInput(e=>{alert(e)}),e.value.addTextInput(e=>{alert(e)})})})})}),e.start=function(){const e=new URLSearchParams(window.location.search);let n=e.get("server")||prompt("Enter the server address.","ws://127.0.0.1:64209/ws");if(!n||0==n.length)throw alert("Malformed server address!");let i=e.get("name")||prompt("Enter a username.");if(!i||0==i.length)throw alert("Malformed username!");let o=new u.Views.UI(".views").addView("main"),a=document.createElement("canvas");a.classList.add("renderCanvas"),o.element.appendChild(a);let p=new h.Renderer,w=new s.Client(i,n,!0),b=p.createView(a),m=new r.PhysicsHandler(w,b,t);w.handlers.push(m);let f=new d.PlanetsHandler(w,b,t);w.handlers.push(f);let v=new u.Chat.UI("#chat"),y=new l.ChatHandler(w,v);w.handlers.push(y);let g=new u.Sidebar.UI(document.querySelector(".sidebar#users")),E=new c.UsersHandler(w,g);w.handlers.push(E),p.start(),w.connect("0.1.1")}}(p=t.Viewer||(t.Viewer={})),p.start()},function(e,t,n){var i=n(0),o=n(12);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},function(e,t,n){(t=n(1)(!1)).push([e.i,"body{height:100vh;width:100vw;overflow:hidden}.renderCanvas{width:100%;height:100%;touch-action:none}",""]),e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;class i{constructor(e,t,n=!1){this.name=e,this.url=t,this.reconnect=n,this.seq=0,this.reconnectInterval=1e4,this.handlers=[]}connect(e,t){console.info("Trying to connect to ",this.url),this.version=e,this.secret=t,this.socket=new WebSocket(this.url,"ert-concierge"),this.socket.onopen=e=>this.onOpen(e),this.socket.onmessage=e=>this.onReceive(e),this.socket.onerror=e=>this.onError(e),this.socket.onclose=e=>this.onClose(e)}sendJSON(e){if(null==this.socket)throw new Error("Socket is not connected");this.socket.send(JSON.stringify(e));let t=this.seq;return this.seq+=1,t}close(e,t,n=!0){if(null==this.socket)throw new Error("Socket is not connected");this.socket.close(e,t),n?this.tryReconnect():(this.socket=void 0,this.version=void 0,this.secret=void 0)}tryReconnect(){this.reconnect&&(console.warn("Connection closed, reconnecting in",this.reconnectInterval,"ms"),setTimeout(()=>{this.connect(this.version,this.secret)},this.reconnectInterval))}onOpen(e){var t;for(let n of this.handlers)null===(t=n.onOpen)||void 0===t||t.call(n,e);if(null==this.version)throw new Error("Version is undefined");console.log("Identifying with version",this.version),this.sendJSON({type:"IDENTIFY",name:this.name,version:this.version,secret:this.secret,tags:["babylon"]})}onClose(e){var t;for(let n of this.handlers)null===(t=n.onClose)||void 0===t||t.call(n,e);console.warn(e.code,e.reason),this.tryReconnect()}onReceive(e){var t;let n=JSON.parse(e.data);if(n.hasOwnProperty("type")){let e=n;"HELLO"==e.type&&(console.log("Assigned uuid",e.uuid),this.uuid=e.uuid,this.seq=0);for(let n of this.handlers)null===(t=n.onReceive)||void 0===t||t.call(n,e)}}onError(e){var t;for(let n of this.handlers)null===(t=n.onError)||void 0===t||t.call(n,e);console.log(e)}}t.Client=i,t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhysicsHandler=t.PHYSICS_ENGINE_GROUP=t.PHYSICS_ENGINE_NAME=void 0;const i=n(3),o=n(4);function a(e){return new i.Vector2(e.x-500,e.y-500)}function s(e){function t(e){return Math.max(0,Math.min(e,255))/255}return new i.Color3(t(e[0]),t(e[1]),t(e[2]))}t.PHYSICS_ENGINE_NAME="physics_engine",t.PHYSICS_ENGINE_GROUP="physics_engine_out";class r{constructor(e,t){this.centroid=e,this.mesh=t}static createPolygon(e,t,n,o,a=1){let s=t.map(e=>e.scaleInPlace(a)),l=new i.PolygonMeshBuilder("polytri",s,n).build(void 0,50*a);l.position.y+=50*a;var d=new i.StandardMaterial("myMaterial",n);return d.diffuseColor=o,l.material=d,l.actionManager=new i.ActionManager(n),new r(e.scaleInPlace(a),l)}setColor(e){this.mesh.material.diffuseColor=e}moveTo(e){let t=e.subtract(this.centroid);this.mesh.position.addInPlace(t),this.centroid.set(e.x,e.y,e.z)}dispose(){this.mesh.dispose()}}class l extends o.ServiceEventHandler{constructor(e,n,i){super(e,t.PHYSICS_ENGINE_GROUP),this.renderer=n,this.drawerUI=i,this.shapes=new Map,this.visualScale=.02}sendToSim(e){this.client.sendJSON({type:"MESSAGE",target:{type:"NAME",name:t.PHYSICS_ENGINE_NAME},data:e})}onRecvMessage(e){e.origin.name==t.PHYSICS_ENGINE_NAME&&this.processPhysicsPayload(e.data)}onSubscribe(){console.log("Fetching..."),this.sendToSim({type:"FETCH_ENTITIES"}),this.sendToSim({type:"SPAWN_ENTITY"}),this.setupController()}setupController(){var e;null===(e=this.drawerUI)||void 0===e||e.addTab(t.PHYSICS_ENGINE_NAME,"Rust Physics",e=>{e.addHeader(e=>{e.add("h1","Rust Physics"),e.add("p","SURF 2020 / OVRAS"),e.addButton("Respawn",()=>{this.sendToSim({type:"SPAWN_ENTITY"})})}),e.addBody(e=>{e.addBox(e=>{e.add("h2","Instructions"),e.add("p","Click on your own box colors to duplicate it."),e.add("p","Click on boxes with another color to destroy them.")})})})}onUnsubscribe(){this.clearShapes(),this.destroyController()}destroyController(){var e;null===(e=this.drawerUI)||void 0===e||e.removeTab(t.PHYSICS_ENGINE_NAME)}clearShapes(){for(let e of this.shapes.keys())if(this.shapes.has(e)){this.shapes.get(e).dispose(),this.shapes.delete(e)}}createPolygon(e,t,n,o){if(this.renderer.scene){let a=r.createPolygon(new i.Vector3(t.x,0,t.y),n,this.renderer.scene,o,this.visualScale);return this.shapes.set(e,a),a}throw new Error("Scene not initialized!")}createShape(e,t,n,o){let r=a(t),l=n.map(a),d=s(o);this.createPolygon(e,r,l,d).mesh.actionManager.registerAction(new i.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,()=>{console.log("Clicking on object ",e,"."),this.sendToSim({type:"TOUCH_ENTITY",id:e})}))}removeShape(e){let t=this.shapes.get(e);t&&(t.dispose(),this.shapes.delete(e))}updateShape(e,t){let n=this.shapes.get(e);if(n){let e=a(t);n.moveTo(new i.Vector3(e.x,0,e.y).scaleInPlace(this.visualScale))}}updateColor(e,t){let n=this.shapes.get(e);n&&n.setColor(s(t))}processPhysicsPayload(e){switch(e.type){case"ENTITY_NEW":let t=e.entity;this.createShape(t.id,t.centroid,t.points,t.color);break;case"ENTITY_DELETE":for(let t of e.ids)this.removeShape(t);break;case"ENTITY_DUMP":console.log("Dumping entities!"),this.clearShapes();for(let t of e.entities)this.createShape(t.id,t.centroid,t.points,t.color);break;case"POSITION_DUMP":for(let t of e.updates)this.updateShape(t.id,t.position);break;case"COLOR_UPDATE":this.updateColor(e.id,e.color)}}}t.PhysicsHandler=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatHandler=void 0;const i=n(4);class o extends i.ServiceEventHandler{constructor(e,t){super(e,"chat"),this.client=e,this.ui=t,this.client=e,this.ui=t,t.onEnter=e=>{this.onEnter(e)}}onSubscribe(){this.ui.addStatus("Connected to the chat system.")}onEnter(e){this.client.sendJSON({type:"MESSAGE",target:{type:"GROUP",group:"chat"},data:e})}onRecvMessage(e){e.origin&&"chat"==e.origin.group&&"string"==typeof e.data&&this.ui.addMessage(e.origin.name,e.data,e.origin.name==this.client.name)}onUnsubscribe(){this.ui.addStatus("Disconnected from the chat system.")}}t.ChatHandler=o},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlanetsHandler=t.PLANET_SIM_GROUP=t.PLANET_SIM_NAME=void 0,n(17);const a=n(3),s=n(4),r=o(n(5)),l=o(n(19)),d=n(20);t.PLANET_SIM_NAME="planetary_simulation",t.PLANET_SIM_GROUP="planetary_simulation_out";n(22);class c{constructor(e,t,n,i){this.id=e,this.centroid=t,this.mesh=n,this.trailMesh=i}static create(e,t,n,i,o,s=1){let r=a.MeshBuilder.CreateSphere("mySphere",{diameter:2*n*s},i);r.position=t;var l=new a.StandardMaterial("myMaterial",i);l.diffuseColor=o,r.material=l,r.actionManager=new a.ActionManager(i);let d=new a.TrailMesh("trail",r,i,Math.min(.02,n*s),1e3,!0);return new c(e,t,r,d)}dispose(){var e;this.unhookHover(),null===(e=this.trailMesh)||void 0===e||e.dispose(),this.mesh.dispose()}hookHover(e){this.mesh.actionManager}unhookHover(){this.mesh.actionManager&&(this.enterAction&&(this.mesh.actionManager.unregisterAction(this.enterAction),this.enterAction=void 0),this.exitAction&&(this.mesh.actionManager.unregisterAction(this.exitAction),this.exitAction=void 0),this.clickAction&&(this.mesh.actionManager.unregisterAction(this.clickAction),this.clickAction=void 0))}setColor(e){this.mesh.material.diffuseColor=e}moveTo(e){let t=e.subtract(this.centroid);this.mesh.position.addInPlace(t),this.centroid.set(e.x,e.y,e.z)}}class h extends s.ServiceEventHandler{constructor(e,n,i){super(e,t.PLANET_SIM_GROUP),this.renderer=n,this.drawerUI=i,this.visualScale=5,this.infoHandler=new u(this),this.planets=new Map}onRecvMessage(e){e.origin.name==t.PLANET_SIM_NAME&&this.processPlanetsPayload(e.data)}sendToSim(e){this.client.sendJSON({type:"MESSAGE",target:{type:"NAME",name:t.PLANET_SIM_NAME},data:e})}onSubscribe(){var e;this.controllerTab=null===(e=this.drawerUI)||void 0===e?void 0:e.addTab(t.PLANET_SIM_NAME,"Planetary Controls"),console.log("Planet simulator client is ready to go!"),this.sendToSim({type:"FETCH_SYSTEM_DATA"})}renderController(){var e;l.default.render(r.default.createElement(d.PlanetaryComponent,{handler:this}),null===(e=this.controllerTab)||void 0===e?void 0:e.bodyElement)}upload(e,t){return i(this,void 0,void 0,(function*(){const n=new URL(`/fs/${this.client.name}/system.json`,e),i=new Headers;i.append("x-fs-key",this.client.uuid);const o=yield fetch(n.toString(),{method:"POST",headers:i,body:t});switch(o.status){case 200:case 201:this.sendToSim({type:"LOAD_SYSTEM",url:n.toString()});break;default:alert("Unexpected response:"+o.status+" "+o.statusText)}}))}onUnsubscribe(){var e;null===(e=this.drawerUI)||void 0===e||e.removeTab(t.PLANET_SIM_NAME),this.clearShapes(),console.log("Planet simulator client has disconnected!")}clearShapes(){for(let e of this.planets.keys()){const t=this.planets.get(e);t&&(t.dispose(),this.planets.delete(e))}}processPlanetsPayload(e){switch(e.type){case"SYSTEM_REMOVE_PLANETS":for(const t of e.ids){let e=this.planets.get(t);e&&(e.dispose(),this.planets.delete(t))}break;case"SYSTEM_DATA_DUMP":this.sysData=e.data,this.clearShapes(),this.sendToSim({type:"FETCH_SYSTEM_OBJS"});break;case"SYSTEM_OBJS_DUMP":if(null==this.sysData)return;for(let t of e.objects){let e=new a.Vector3(t.location[0],t.location[1],t.location[2]).scaleInPlace(1/this.sysData.scale).scaleInPlace(this.visualScale);if(this.planets.has(t.name)){let n=this.planets.get(t.name);n.moveTo(e),n.data=t}else{if(!this.renderer.scene)throw new Error("Scene not initialized!");{let n=t.radius/this.sysData.scale*this.sysData.bodyScale*this.visualScale,i=a.Color3.FromArray(t.color);t.name==this.sysData.centralBodyName&&(console.log("Found central body!"),n*=this.sysData.centralBodyScale,e.scaleInPlace(this.sysData.centralBodyScale));let o=c.create(t.name,e,n,this.renderer.scene,i);o.data=t,this.planets.set(t.name,o)}}}break;case"SYSTEM_CLEAR":console.log("Clearing shapes"),this.clearShapes()}}}t.PlanetsHandler=h;class u{constructor(e){this.handler=e,this.hoveredPlanets=new Set}getLock(){return this.planetLock}lock(e){this.planetLock=e}unlock(){this.planetLock=void 0}hover(e){this.hoveredPlanets.add(e)}unhover(e){this.hoveredPlanets.delete(e)}clear(){this.hoveredPlanets.clear(),this.planetLock=void 0}unlitPlanet(e){e&&(e.mesh.material.emissiveColor=a.Color3.Black(),this.littedPlanet=void 0)}litPlanet(e){e&&(e.mesh.material.emissiveColor=a.Color3.Red(),this.littedPlanet=e.id)}handleUpdate(e,t,n){this.handler.sendToSim({type:"UPDATE_DATA",target:e,field:t,value:n})}}},function(e,t,n){var i=n(0),o=n(18);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},function(e,t,n){(t=n(1)(!1)).push([e.i,'.planetary-controls{position:relative;width:100%;height:100%;font-family:"Titillium Web","Roboto",sans-serif;box-sizing:border-box;overflow:auto}.planetary-controls .planetary-upload{display:flex}.planetary-controls .planetary-upload input[type=file]{flex:1 0 auto}.planetary-controls .icons{border-radius:5px;background:#fff;padding:10px;font-size:30px;position:relative;text-align:center;display:flex;justify-content:space-evenly;color:#aaa}.planetary-controls .icons div{width:100%;height:100%;text-align:center;display:flex;justify-content:space-evenly}.planetary-controls .icons i{transition:transform .2s;cursor:pointer}.planetary-controls .icons i:hover{transform:scale(1.2)}.planetary-controls .info{padding:10px}',""]),e.exports=t},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlanetInfoComponent=t.SystemInfoComponent=t.PlanetaryStateComponent=t.PlanetaryComponent=void 0;const o=i(n(5)),a=n(21);class s extends o.default.Component{Info(){let e=this.props.handler;if(e.infoHandler.planetLock){let t=e.planets.get(e.infoHandler.planetLock);return o.default.createElement(d,{data:t.data})}if(0!=e.infoHandler.hoveredPlanets.size){let t=e.infoHandler.hoveredPlanets.values().next(),n=e.planets.get(t.value);return o.default.createElement(d,{data:n.data})}return o.default.createElement(l,{data:e.sysData})}render(){return o.default.createElement("div",null,o.default.createElement(a.TabHeader,null,o.default.createElement("div",{className:"icons"},o.default.createElement(r,{handler:this.props.handler})),o.default.createElement("div",{className:"info"},o.default.createElement(this.Info,null))),o.default.createElement(a.TabBody,null,o.default.createElement(a.TabBox,null,o.default.createElement("h2",null,"Upload JSON System")),o.default.createElement(a.TabBox,null,o.default.createElement("h2",null,"Planetary Simulation"),o.default.createElement("p",null,"Python Simulation by Alison Noyes"),o.default.createElement("p",null,"BabylonJS Front-end by An Tran"))))}}t.PlanetaryComponent=s;class r extends o.default.Component{constructor(e){super(e),this.fb=this.fb.bind(this),this.pause=this.pause.bind(this),this.play=this.play.bind(this),this.sf=this.sf.bind(this),this.ff=this.ff.bind(this)}fb(){this.props.handler.sendToSim({type:"FAST_BACKWARD"})}pause(){this.props.handler.sendToSim({type:"PAUSE"})}play(){this.props.handler.sendToSim({type:"PLAY"})}sf(){this.props.handler.sendToSim({type:"STEP_FORWARD"})}ff(){this.props.handler.sendToSim({type:"FAST_FORWARD"})}render(){return o.default.createElement("div",null,o.default.createElement("i",{className:"fa fa-fast-backward",onClick:this.fb}),o.default.createElement("i",{className:"fa fa-pause",onClick:this.pause}),o.default.createElement("i",{className:"fa fa-play",onClick:this.play}),o.default.createElement("i",{className:"fa fa-step-forward",onClick:this.sf}),o.default.createElement("i",{className:"fa fa-fast-forward",onClick:this.ff}))}}t.PlanetaryStateComponent=r;class l extends o.default.Component{render(){return o.default.createElement("div",null,o.default.createElement("h1",null,"SYSTEM"),o.default.createElement(a.Entry,{name:"Gravity Constant",onSubmit:this.props.onSubmit,values:[{tag:"gravityConstant",value:this.props.data.gravityConstant}]}),o.default.createElement(a.Entry,{name:"Scale",onSubmit:this.props.onSubmit,values:[{tag:"scale",value:this.props.data.scale}]}),o.default.createElement(a.Entry,{name:"Time Scale",onSubmit:this.props.onSubmit,values:[{value:this.props.data.timeScale}]}),o.default.createElement(a.Entry,{name:"Body Scale",onSubmit:this.props.onSubmit,values:[{tag:"bodyScale",value:this.props.data.bodyScale}]}),o.default.createElement(a.Entry,{name:"Central Body Scale",onSubmit:this.props.onSubmit,values:[{tag:"centralBodyScale",value:this.props.data.centralBodyScale}]}),o.default.createElement(a.Entry,{name:"Elasticity",onSubmit:this.props.onSubmit,values:[{tag:"elasticity",value:this.props.data.elasticity}]}),o.default.createElement(a.Entry,{name:"Central Body Name",onSubmit:this.props.onSubmit,values:[{value:this.props.data.centralBodyName}]}),o.default.createElement(a.Entry,{name:"Hand Mass",onSubmit:this.props.onSubmit,values:[{value:this.props.data.handMass}]}),o.default.createElement(a.Entry,{name:"Boundary",onSubmit:this.props.onSubmit,values:[{tag:"boundary",value:this.props.data.boundary}]}))}}t.SystemInfoComponent=l;class d extends o.default.Component{render(){return o.default.createElement("div",null,o.default.createElement("h1",null,this.props.data.name.toUpperCase()),o.default.createElement(a.Entry,{name:"Mass",onSubmit:this.props.onSubmit,values:[{tag:"mass",value:this.props.data.mass}]}),o.default.createElement(a.Entry,{name:"Radius",onSubmit:this.props.onSubmit,values:[{tag:"radius",value:this.props.data.radius}]}),o.default.createElement(a.Entry,{name:"Location",onSubmit:this.props.onSubmit,values:[{tag:"location[0]",value:this.props.data.location[0]},{tag:"location[1]",value:this.props.data.location[1]},{tag:"location[2]",value:this.props.data.location[2]}]}),o.default.createElement(a.Entry,{name:"Orbit Radius",onSubmit:this.props.onSubmit,values:[{tag:"orbitRadius",value:this.props.data.orbitRadius}]}),o.default.createElement(a.Entry,{name:"Orbit Speed",onSubmit:this.props.onSubmit,values:[{tag:"orbitSpeed",value:this.props.data.orbitSpeed}]}),o.default.createElement(a.Entry,{name:"Location",onSubmit:this.props.onSubmit,values:[{tag:"direction[0]",value:this.props.data.direction[0]},{tag:"direction[1]",value:this.props.data.direction[1]},{tag:"direction[2]",value:this.props.data.direction[2]}]}))}}t.PlanetInfoComponent=d},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Entry=t.TabBox=t.TabBody=t.TabHeader=void 0;const o=i(n(5));class a extends o.default.PureComponent{render(){return o.default.createElement("div",{className:"window-tab-header"},this.props.children)}}t.TabHeader=a;class s extends o.default.PureComponent{render(){return o.default.createElement("div",{className:"window-tab-body"},this.props.children)}}t.TabBody=s;class r extends o.default.PureComponent{render(){return o.default.createElement("div",{className:"window-tab-box"},this.props.children)}}t.TabBox=r;class l extends o.default.Component{constructor(e){super(e),this.state={values:e.values.map(e=>{})}}onKeyDown(e,t){var n,i;if(13===e.keyCode){e.preventDefault();const o=this.props.values[t].tag;if(!o)return;const a=this.props.values[t].value,s=this.state.values[t];s&&s!=a&&(null===(i=(n=this.props).onSubmit)||void 0===i||i.call(n,o,s))}}handleChange(e,t){const n=e.currentTarget.value;this.props.values[t].value;this.setState(e=>(e.values[t]=n,e))}render(){return o.default.createElement("div",{className:"entry"},o.default.createElement("div",{className:"name"},this.props.name),o.default.createElement("div",{className:"value"},this.props.values.map(({tag:e,value:t},n)=>o.default.createElement("input",{readOnly:null==e,value:this.state.values[n]?this.state.values[n]:t,onChange:e=>this.handleChange(e,n),onKeyDown:e=>this.onKeyDown(e,n)}))))}}t.Entry=l},function(e,t,n){n(23);e.exports=function(e){var t="";return t+='<div class="window-tab planetary-controls"><div class="window-tab-header"><div class="icons"></div><div class="info"></div></div><div class="window-tab-body"><div class="window-tab-box"><h2>Upload JSON System</h2><form class="planetary-upload"><input class="file" type="file" name="file"><button type="submit">Submit</button></form></div><div class="window-tab-box"><h2>Planetary Simulation</h2><p>Python Simulation by Alison Noyes</p><p>BabylonJS frontend by An Tran</p></div></div></div>'}},,function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UsersHandler=void 0;const i=n(4);class o extends i.EventHandler{constructor(e,t){super(),this.client=e,this.ui=t}onClose(e){this.ui.clear()}onRecvHello(e){this.client.sendJSON({type:"FETCH_CLIENTS"})}onRecvClientList(e){this.ui.clear();for(let t of e.clients)this.ui.addInitialIcon(t.name,t.nickname||t.name,t.name[0])}onRecvStatus(e){switch(e.code){case"CLIENT_JOINED":this.ui.addInitialIcon(e.name,e.nickname||e.name,e.name[0]);break;case"CLIENT_LEFT":this.ui.removeIcon(e.name)}}}t.UsersHandler=o},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=t.RendererView=void 0;const s=a(n(3)),r=n(3);class l{constructor(e,t,n,i){this.renderer=e,this.canvas=t,this.scene=n,this.camera=i,this.isFocused=!1,e.engine.registerView(t,i),t.addEventListener("click",()=>{this.isFocused||(this.attachControl(),this.isFocused=!0)}),t.addEventListener("blur",()=>{this.detachControl(),this.isFocused=!1}),null==this.renderer.engine.inputElement&&t.click()}attachControl(){console.log("Attach"),this.renderer.engine.inputElement=this.canvas,this.camera.attachControl(this.canvas,!0),this.scene.attachControl(!0,!0,!0)}detachControl(){console.log("Detach"),this.scene.detachControl()}}t.RendererView=l;t.Renderer=class{constructor(){this.views=[];let e=document.createElement("canvas").getContext("webgl");this.engine=new s.Engine(e,!0)}createView(e){let t=new s.Scene(this.engine),n=new s.UniversalCamera("UniversalCamera",new r.Vector3(0,15,-15),t);n.setTarget(new r.Vector3(0,0,0)),n.speed=.5,n.keysDownward.push(17,16),n.keysUpward.push(32),n.keysUp.push(87,38),n.keysDown.push(83,40),n.keysLeft.push(65,37),n.keysRight.push(68,39),new s.PointLight("light1",new s.Vector3(0,500,0),t).intensity=1;let i=t.createDefaultEnvironment({skyboxSize:500,groundSize:500,groundShadowLevel:.5,enableGroundShadow:!0});i.skybox.isPickable=!1,i.setMainColor(s.Color3.FromHexString("#909090"));let o=new l(this,e,t,n);return this.views.push(o),o}start(){this.engine.runRenderLoop(()=>{var e;for(const t of this.views)(null===(e=this.engine.activeView)||void 0===e?void 0:e.target)===t.canvas&&t.scene.render()}),window.addEventListener("resize",()=>{this.engine.resize()})}stop(){this.engine.stopRenderLoop()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chat=void 0,n(28);const i=n(2);var o;!function(e){e.UI=class{constructor(e){if(this.messages=[],null==e)throw new Error("Root element must not be null!");if("string"==typeof e){let t=document.querySelector(e);if(!t)throw new Error("Query selector "+e+" return null!");this.rootElement=t}else this.rootElement=e;this.setup()}setup(){let e=this.rootElement.querySelector("div.messages")||i.createElement("div",["messages"]),t=this.rootElement.querySelector("div.input")||i.createElement("div",["input"]),n=t.querySelector("input")||i.createElement("input");t.appendChild(n);let o=t.querySelector("div.button")||i.createElement("div",["button"]);t.appendChild(o),n.addEventListener("keydown",e=>{13===e.keyCode&&(e.preventDefault(),o.click())}),o.addEventListener("click",e=>{var t;n.value.length>0&&(null===(t=this.onEnter)||void 0===t||t.call(this,n.value),n.value="")}),this.messagesElement=e,this.rootElement.appendChild(e),this.rootElement.appendChild(t)}createMessageElement(e,t,n=!1){let o=n?i.createElement("div",["entry","you"]):i.createElement("div",["entry"]),a=i.createElement("div",["name"]);a.innerText=e;let s=i.createElement("div",["text"]);return s.innerText=t,o.appendChild(a),o.appendChild(s),o}createStatusElement(e){let t=i.createElement("div",["entry","status"]),n=i.createElement("div",["text"]);return n.innerText=e,t.appendChild(n),t}addStatus(e){let t=this.createStatusElement(e);this.messagesElement.appendChild(t),this.messagesElement.scrollTop=this.messagesElement.scrollHeight}addMessage(e,t,n=!1){let i=this.createMessageElement(e,t,n);this.messagesElement.appendChild(i),this.messages.push({name:e,text:t,element:i}),this.messagesElement.scrollTop=this.messagesElement.scrollHeight}}}(o=t.Chat||(t.Chat={})),t.default=o},function(e,t,n){var i=n(0),o=n(29);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},function(e,t,n){(t=n(1)(!1)).push([e.i,'#chat{background:#ccc;color:#000;height:100%;display:flex;flex-direction:column;font-family:"Titillium Web","Roboto",sans-serif}#chat .input{position:relative;display:flex;width:100%;height:0px;bottom:50px;background:#aaa;padding-left:10px;padding-right:10px;box-sizing:border-box}#chat .input input{background:#aaa;border:0;padding:5px;box-sizing:border-box;height:40px;width:100%;border-radius:5px;margin-right:5px;outline:none;font-family:"Titillium Web","Roboto",sans-serif}#chat .input .button{line-height:40px;text-align:center;line-height:40px;height:40px;width:40px;box-sizing:border-box;border-radius:5px;background:#fff;user-select:none;cursor:pointer}#chat .input .button:hover{background:#eee}#chat .messages{padding:15px;height:100%;width:100%;box-sizing:border-box;display:flex;flex-direction:column;position:relative;overflow:auto}#chat .messages::-webkit-scrollbar{width:10px}#chat .messages::-webkit-scrollbar-track{background:transparent}#chat .messages::-webkit-scrollbar-thumb{background:#aaa;border-radius:5px}#chat .messages::-webkit-scrollbar-thumb:hover{background:#bbb}#chat .messages .entry{display:flex;max-width:90%;flex-direction:column;align-self:flex-start}#chat .messages .entry:last-child{margin-bottom:40px}#chat .messages .entry.you{align-self:flex-end}#chat .messages .entry.you .name{text-align:right}#chat .messages .entry.you .text{border-radius:5px 0px 5px 5px;align-self:flex-end}#chat .messages .entry.status{width:100%;max-width:100%}#chat .messages .entry.status .text{text-align:center;background:none;margin:0;padding:0;color:#888}#chat .messages .entry .name{text-align:left;margin:10px 10px 0px}#chat .messages .entry .text{border-radius:0 5px 5px;background:#fff;padding:10px;word-break:break-all;margin:5px}',""]),e.exports=t},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Sidebar=void 0,n(31);const o=i(n(42));n(33);const a=n(2);var s;!function(e){class t{constructor(e,t,n){this.id=e,this.element=t,this.tooltip=n}destroy(){this.element.remove(),this.tooltip.destroy()}}e.Icon=t;class n{constructor(e){this.icons=[],this.rootElement=e}baseIcon(){return a.createElement("div",["icon"])}static hashString(e){var t,n=0;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}clear(){for(let e of this.icons)e.destroy();this.icons.length=0}addImageIcon(e,n,i){let s=this.baseIcon(),r=o.default(s,{placement:"right",content:n}),l=a.createElement("img");l.setAttribute("src",i),s.appendChild(l),this.rootElement.appendChild(s),this.icons.push(new t(e,s,r))}addInitialIcon(e,i,s){let r=this.baseIcon(),l=o.default(r,{placement:"right",content:i}),d=a.createElement("p");d.innerText=s.toUpperCase(),r.appendChild(d);let c=n.hashString(i)%360;d.style.backgroundColor=`hsl(${c}, 100%, 25%)`,this.rootElement.appendChild(r),this.icons.push(new t(e,r,l))}removeIcon(e){for(let t=0;t<this.icons.length;t++){let n=this.icons[t];n.id==e&&(n.destroy(),this.icons.splice(t,1))}}}e.UI=n}(s=t.Sidebar||(t.Sidebar={})),t.default=s},function(e,t,n){var i=n(0),o=n(32);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},function(e,t,n){(t=n(1)(!1)).push([e.i,'.sidebar{position:fixed;z-index:100;top:0;left:0;flex-direction:column;display:flex;overflow:auto;width:70px;height:100%;padding:15px}.sidebar::-webkit-scrollbar{width:5px}.sidebar::-webkit-scrollbar-track{background:transparent}.sidebar::-webkit-scrollbar-thumb{background:#444;border-radius:5px}.sidebar::-webkit-scrollbar-thumb:hover{background:#555}.sidebar .icon{flex:0 0 auto;width:70px;height:70px;margin-bottom:10px;box-sizing:border-box;position:relative}.sidebar .icon:hover .tooltip{visibility:visible;opacity:1}.sidebar .icon .tooltip{background-color:#555;border-radius:5px;color:#fff;font-family:monospace;margin-left:-10px;margin-top:5px;opacity:0;padding:5px 0;position:absolute;text-align:center;transition:opacity .2s;visibility:hidden;width:calc(100% + 20px);word-break:break-all;z-index:101}.sidebar .icon .tooltip::after{content:"";position:absolute;bottom:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:transparent transparent #555 transparent}.sidebar .icon img,.sidebar .icon p{height:100%;width:100%;background:#000;border-radius:50%;cursor:pointer;transition:border-radius .2s}.sidebar .icon img:hover,.sidebar .icon p:hover{border-radius:10px}.sidebar .icon p{color:#fff;line-height:70px;text-align:center;font-size:40px;font-family:"Titillium Web","Roboto",sans-serif;user-select:none}.tippy-box{font-family:"Titillium Web","Roboto",sans-serif !important}',""]),e.exports=t},,,function(e,t,n){var i=n(0),o=n(36);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},function(e,t,n){(t=n(1)(!1)).push([e.i,'.window{z-index:100;position:fixed;display:flex;bottom:0;width:400px;height:500px;max-height:100%;box-sizing:border-box;transition:margin-left .5s,margin-bottom .5s;flex-direction:column;font-family:"Titillium Web","Roboto",sans-serif}.window.tall{height:800px}.window.tall.hidden{margin-bottom:calc( max( -760px, -100vh + 40px ) )}.window.left{left:50px}.window.right{right:50px}.window.right .window-header{flex-direction:row-reverse}@media screen and (max-width: 500px){.window{left:0 !important;right:0;bottom:0;height:50vh;width:100vw}}.window.hidden{margin-bottom:calc( max( -460px, -100vh + 40px ) )}@media screen and (max-width: 500px){.window.hidden{bottom:0;margin-left:0;margin-bottom:calc(-50vh + $drawer-height)}}.window>.window-header{min-height:40px;height:40px;max-height:40px;margin-left:5px;margin-right:5px;display:flex;flex-direction:row;overflow-x:auto;overflow-y:hidden;width:auto}.window>.window-header::-webkit-scrollbar{width:5px;height:5px}.window>.window-header::-webkit-scrollbar-track{background:transparent}.window>.window-header::-webkit-scrollbar-thumb{background:#aaa;border-radius:5px}.window>.window-header::-webkit-scrollbar-thumb:hover,.window>.window-header.window>.window-header.window-header-tab.active::-webkit-scrollbar-thumb,.window>.window-header.window>.window-header.active.window-drawer::-webkit-scrollbar-thumb{background:#bbb}.window>.window-header>.window-header-tab,.window>.window-header>.window-drawer{display:inline;max-height:40px;line-height:40px;background:transparent;text-align:center;padding:0px 10px 0px;color:#ccc;cursor:pointer;transition:background-color .2s,color .2s;white-space:nowrap}.window>.window-header>.window-header-tab:hover,.window>.window-header>.window-drawer:hover,.window>.window-header>.window-header-tab.active,.window>.window-header>.active.window-drawer{color:#fff}.window>.window-header>.window-header-tab.active,.window>.window-header>.active.window-drawer{font-weight:bold}.window>.window-header>.window-drawer{margin-top:0;background:none;color:#fff;min-width:40px;width:40px;padding:0}.window>.window-body{background:#bbb;height:100%;width:100%;border-radius:5px 5px 0 0;overflow:hidden;color:#000}.window>.window-body>.window-tab{height:100%;width:100%;display:none;position:relative;font-family:"Titillium Web","Roboto",sans-serif;box-sizing:border-box;overflow:auto}.window>.window-body>.window-tab.active{display:inherit}.window>.window-body>.window-tab h1{font-size:30px;margin-bottom:5px;font-weight:bold}.window>.window-body>.window-tab h2{font-size:20px;margin-bottom:5px;font-weight:bold}.window>.window-body>.window-tab p{margin-bottom:5px}.window>.window-body>.window-tab p:last-child{margin-bottom:0}.window>.window-body>.window-tab button{background:#ff6c0c;font-family:inherit;font-size:15px;padding:10px;border:none;border-radius:5px}.window>.window-body>.window-tab button:focus{outline:none}.window>.window-body>.window-tab button:hover,.window>.window-body>.window-tab .window>.window-header>button.window-header-tab.active,.window>.window-body>.window-tab .window>.window-header>button.active.window-drawer{background:#ff9152}.window>.window-body>.window-tab button:active{background:#ffcbac}.window>.window-body>.window-tab .entry{display:flex;margin-bottom:5px}.window>.window-body>.window-tab .entry>.name{width:40%;text-align:right;padding-right:10px;box-sizing:border-box;align-self:center}.window>.window-body>.window-tab .entry>.value{flex:1 0 auto;display:flex;flex-direction:column}.window>.window-body>.window-tab .entry>.value input{font-family:inherit;width:100%;padding:5px;box-sizing:border-box;border:none;background:#fff;text-align:right;transition:background-color .2s}.window>.window-body>.window-tab .entry>.value input:read-only{background:#eee;outline:none}.window>.window-body>.window-tab .entry>.value input:first-child{border-radius:5px 5px 0 0}.window>.window-body>.window-tab .entry>.value input:not(:first-child):not(:last-child){border-radius:0}.window>.window-body>.window-tab .entry>.value input:not(:last-child){margin-bottom:1px}.window>.window-body>.window-tab .entry>.value input:last-child{border-radius:0 0 5px 5px}.window>.window-body>.window-tab .entry>.value input:first-child:last-child{border-radius:5px}.window>.window-body>.window-tab>.window-tab-header{background:#ddd;padding:10px}.window>.window-body>.window-tab>.window-tab-header>.window-tab-box{background:#eee}.window>.window-body>.window-tab .window-tab-box{width:100%;padding:10px;border-radius:5px;box-sizing:border-box;word-break:break-word;margin-bottom:10px}.window>.window-body>.window-tab .window-tab-box:last-child{margin-bottom:0}.window>.window-body>.window-tab>.window-tab-body{padding:10px}.window>.window-body>.window-tab>.window-tab-body .window-tab-box{background:#ccc}',""]),e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Input=t.Value=t.Name=t.Entry=t.Button=t.Box=t.Body=t.Header=t.HTMLBody=t.AbstractBody=void 0;const i=n(6);class o{constructor(e,t){this.bodyElement=t,this.children=[],this.bodyElement=t,null==e||e.bodyElement.appendChild(t)}addChild(e,t){return this.children.push(e),null==t||t(e),e}remove(){for(const e of this.children)e.remove()}}t.AbstractBody=o;class a extends o{constructor(e,t,n=[]){super(e,i.createElement(t,n)),this.type="HTMLBODY"}}t.HTMLBody=a;class s extends o{constructor(e,t){super(e,t)}addEntry(e){return this.addChild(new d(this),e)}addBox(e){return this.addChild(new r(this),e)}add(e,t){let n=new a(this,e,[]);return n.bodyElement.textContent=t,this.addChild(n)}addButton(e,t){return this.addChild(new l(this,e,t))}}t.Header=class extends s{constructor(e){super(e,i.createElement("div",["window-tab-header"])),this.type="HEADER"}};t.Body=class extends s{constructor(e){super(e,i.createElement("div",["window-tab-body"])),this.type="BODY"}};class r extends s{constructor(e){super(e,i.createElement("div",["window-tab-box"])),this.type="BOX"}}t.Box=r;class l extends o{constructor(e,t,n){super(e,i.createElement("button",[])),this.callback=n,this.type="BUTTON",this.bodyElement.textContent=t,this.bodyElement.onclick=()=>{var e;null===(e=this.callback)||void 0===e||e.call(this,this)}}}t.Button=l;class d extends o{constructor(e){super(e,i.createElement("div",["entry"])),this.type="ENTRY",this.addChild(new c(this)),this.addChild(new h(this))}get name(){return this.children[0]}get value(){return this.children[1]}}t.Entry=d;class c extends o{constructor(e){super(e,i.createElement("div",["name"])),this.type="ENTRY_NAME"}set text(e){this.bodyElement.textContent=e}get text(){return this.bodyElement.textContent}}t.Name=c;class h extends o{constructor(e){super(e,i.createElement("div",["value"])),this.type="ENTRY_VALUE"}addTextInput(e){return this.addChild(new u(this,"text",e))}}t.Value=h;class u extends o{constructor(e,t,n){super(e,i.createElement("input")),this.callback=n,this.bodyElement.setAttribute("type",t),this.type=t,this.bodyElement.onkeydown=e=>{var t;13===e.keyCode&&(e.preventDefault(),null===(t=this.callback)||void 0===t||t.call(this,this.value,this))}}set value(e){this.bodyElement.value=e}get value(){return this.bodyElement.value}}t.Input=u},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Views=void 0,n(39);const o=n(2),a=i(n(41));var s;!function(e){e.UI=class{constructor(e,t=!1){if(this.enableSplit=t,null==e)throw new Error("Root element must not be null!");if("string"==typeof e){let t=document.querySelector(e);if(!t)throw new Error("Query selector "+e+" return null!");this.rootElement=t}else this.rootElement=e;this.views=new Map}unsetSplit(){var e;this.enableSplit&&(null===(e=this.split)||void 0===e||e.destroy())}setSplit(){if(!this.enableSplit)return;let e=[];for(const t of this.views.values())e.push(t.element);this.split=a.default(e,{direction:"horizontal",gutterSize:10,minSize:300})}addView(e){if(this.unsetSplit(),this.views.has(e))throw new Error("View "+e+" already exists!");let t=o.createElement("div",["view"]);this.rootElement.appendChild(t);let n={id:e,element:t};return this.views.set(e,n),this.setSplit(),n}removeView(e){this.unsetSplit();let t=this.views.get(e);t&&(t.element.remove(),this.views.delete(e)),this.setSplit()}}}(s=t.Views||(t.Views={})),t.default=s},function(e,t,n){var i=n(0),o=n(40);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},function(e,t,n){(t=n(1)(!1)).push([e.i,".views{width:100%;height:100%;display:flex}.views .view{flex:1 0 0;height:100%}.gutter.gutter-horizontal{cursor:ew-resize;background-color:#000;height:100vh}",""]),e.exports=t}]);